{"ast":null,"code":"import React,{useState,useContext}from\"react\";import{Container,Row,Col,Form,FormGroup,Button}from\"reactstrap\";import{Link,useNavigate}from\"react-router-dom\";import\"../styles/Login.css\";import registerImg from\"../assets/images/register.png\";import userIcon from\"../assets/images/user.png\";import{AuthContext}from\"../context/AuthContext\";import{BASE_URL}from\"../utils/config\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Register=()=>{const[credentials,setCredentials]=useState({username:\"\",email:\"\",password:\"\"});const[error,setError]=useState(null);const[success,setSuccess]=useState(null);const[isEmailValid,setIsEmailValid]=useState(true);// State for email validation\nconst[showPassword,setShowPassword]=useState(false);// State to toggle password visibility\nconst{dispatch}=useContext(AuthContext);const navigate=useNavigate();const handleChange=e=>{const{id,value}=e.target;setCredentials(prevCredentials=>({...prevCredentials,[id]:value}));};const handleClick=async e=>{e.preventDefault();dispatch({type:\"REGISTER_START\"});setError(null);// Reset the error on each registration attempt\nsetIsEmailValid(true);// Reset email validation status\ntry{const res=await fetch(\"\".concat(BASE_URL,\"/auth/register\"),{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},credentials:\"include\",body:JSON.stringify(credentials)});const result=await res.json();if(!res.ok){setError(result.message);dispatch({type:\"REGISTER_FAILURE\",payload:result.message});}else{setSuccess(\"Registration successful!\");// Set the success message\ndispatch({type:\"REGISTER_SUCCESS\",payload:result});setTimeout(()=>{navigate(\"/login\");},1000);}}catch(error){setError(\"An error occurred while registering. Please try again later.\");dispatch({type:\"REGISTER_FAILURE\",payload:error.message});}};const validateEmail=email=>{// Simple email validation regex pattern\nconst emailRegex=/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}$/;return emailRegex.test(email);};const handleEmailChange=e=>{const{value}=e.target;setIsEmailValid(validateEmail(value));// Set email validation status\nhandleChange(e);// Call the regular handleChange function\n};const togglePasswordVisibility=()=>{setShowPassword(!showPassword);};return/*#__PURE__*/_jsx(\"section\",{children:/*#__PURE__*/_jsx(Container,{children:/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsx(Col,{lg:\"8\",className:\"m-auto\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"login__container d-flex justify-content-between\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"login__img\",children:/*#__PURE__*/_jsx(\"img\",{src:registerImg,alt:\"\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"login__form\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"user\",children:/*#__PURE__*/_jsx(\"img\",{src:userIcon,alt:\"\"})}),/*#__PURE__*/_jsx(\"h2\",{children:\"Register\"}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-danger\",children:error}),success&&/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-success\",children:success}),/*#__PURE__*/_jsxs(Form,{onSubmit:handleClick,children:[/*#__PURE__*/_jsx(FormGroup,{children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Username\",required:true,id:\"username\",onChange:handleChange})}),/*#__PURE__*/_jsxs(FormGroup,{children:[/*#__PURE__*/_jsx(\"input\",{type:\"email\",placeholder:\"Email\",required:true,autoComplete:\"true\",id:\"email\",onChange:handleEmailChange// Use handleEmailChange for email input\n}),!isEmailValid&&/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-danger\",children:\"Please enter a valid email address\"})]}),/*#__PURE__*/_jsx(FormGroup,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"password__input\",children:[/*#__PURE__*/_jsx(\"input\",{type:showPassword?\"text\":\"password\",placeholder:\"Password\",required:true,autoComplete:\"true\",id:\"password\",onChange:handleChange}),/*#__PURE__*/_jsx(\"i\",{className:\"ri-eye-line\".concat(showPassword?\"-slash\":\"\"),onClick:togglePasswordVisibility})]})}),/*#__PURE__*/_jsx(Button,{className:\"btn secondary__btn auth__btn\",type:\"submit\",onClick:handleClick,children:\"Create Account\"})]}),/*#__PURE__*/_jsx(\"p\",{children:/*#__PURE__*/_jsx(Link,{to:\"/forgotpassword\",children:\"Forgot Password?\"})}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Already have an account? \",/*#__PURE__*/_jsx(Link,{to:\"/login\",children:\"Login\"})]})]})]})})})})});};export default Register;","map":{"version":3,"names":["React","useState","useContext","Container","Row","Col","Form","FormGroup","Button","Link","useNavigate","registerImg","userIcon","AuthContext","BASE_URL","jsx","_jsx","jsxs","_jsxs","Register","credentials","setCredentials","username","email","password","error","setError","success","setSuccess","isEmailValid","setIsEmailValid","showPassword","setShowPassword","dispatch","navigate","handleChange","e","id","value","target","prevCredentials","handleClick","preventDefault","type","res","fetch","concat","method","headers","body","JSON","stringify","result","json","ok","message","payload","setTimeout","validateEmail","emailRegex","test","handleEmailChange","togglePasswordVisibility","children","lg","className","src","alt","onSubmit","placeholder","required","onChange","autoComplete","onClick","to"],"sources":["/home/soujanya/Music/frontend/src/Pages/Register.jsx"],"sourcesContent":["import React, { useState, useContext } from \"react\";\nimport { Container, Row, Col, Form, FormGroup, Button } from \"reactstrap\";\nimport { Link, useNavigate } from \"react-router-dom\";\nimport \"../styles/Login.css\";\nimport registerImg from \"../assets/images/register.png\";\nimport userIcon from \"../assets/images/user.png\";\nimport { AuthContext } from \"../context/AuthContext\";\nimport { BASE_URL } from \"../utils/config\";\n\nconst Register = () => {\n  const [credentials, setCredentials] = useState({\n    username: \"\",\n    email: \"\",\n    password: \"\",\n  });\n\n  const [error, setError] = useState(null);\n  const [success, setSuccess] = useState(null);\n  const [isEmailValid, setIsEmailValid] = useState(true); // State for email validation\n  const [showPassword, setShowPassword] = useState(false); // State to toggle password visibility\n\n  const { dispatch } = useContext(AuthContext);\n  const navigate = useNavigate();\n\n  const handleChange = (e) => {\n    const { id, value } = e.target;\n    setCredentials((prevCredentials) => ({\n      ...prevCredentials,\n      [id]: value,\n    }));\n  };\n\n  const handleClick = async (e) => {\n    e.preventDefault();\n\n    dispatch({ type: \"REGISTER_START\" });\n    setError(null); // Reset the error on each registration attempt\n    setIsEmailValid(true); // Reset email validation status\n    try {\n      const res = await fetch(`${BASE_URL}/auth/register`, {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        credentials: \"include\",\n        body: JSON.stringify(credentials),\n      });\n\n      const result = await res.json();\n      if (!res.ok) {\n        setError(result.message);\n        dispatch({ type: \"REGISTER_FAILURE\", payload: result.message });\n      } else {\n        setSuccess(\"Registration successful!\"); // Set the success message\n        dispatch({ type: \"REGISTER_SUCCESS\", payload: result });\n        setTimeout(() => {\n          navigate(\"/login\");\n        }, 1000);      }\n    } catch (error) {\n      setError(\"An error occurred while registering. Please try again later.\");\n      dispatch({ type: \"REGISTER_FAILURE\", payload: error.message });\n    }\n  };\n\n  const validateEmail = (email) => {\n    // Simple email validation regex pattern\n    const emailRegex = /^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}$/;\n    return emailRegex.test(email);\n  };\n\n  const handleEmailChange = (e) => {\n    const { value } = e.target;\n    setIsEmailValid(validateEmail(value)); // Set email validation status\n    handleChange(e); // Call the regular handleChange function\n  };\n\n  const togglePasswordVisibility = () => {\n    setShowPassword(!showPassword);\n  };\n\n  return (\n    <section>\n      <Container>\n        <Row>\n          <Col lg=\"8\" className=\"m-auto\">\n            <div className=\"login__container d-flex justify-content-between\">\n              <div className=\"login__img\">\n                <img src={registerImg} alt=\"\" />\n              </div>\n\n              <div className=\"login__form\">\n                <div className=\"user\">\n                  <img src={userIcon} alt=\"\" />\n                </div>\n                <h2>Register</h2>\n                {error && <div className=\"alert alert-danger\">{error}</div>}\n                {success && <div className=\"alert alert-success\">{success}</div>}\n                <Form onSubmit={handleClick}>\n                  <FormGroup>\n                    <input\n                      type=\"text\"\n                      placeholder=\"Username\"\n                      required\n                      id=\"username\"\n                      onChange={handleChange}\n                    />\n                  </FormGroup>\n                  <FormGroup>\n                    <input\n                      type=\"email\"\n                      placeholder=\"Email\"\n                      required\n                      autoComplete=\"true\"\n                      id=\"email\"\n                      onChange={handleEmailChange} // Use handleEmailChange for email input\n                    />\n                    {!isEmailValid && <div className=\"alert alert-danger\">Please enter a valid email address</div>}\n                  </FormGroup>\n                  <FormGroup>\n                    <div className=\"password__input\">\n                      <input\n                        type={showPassword ? \"text\" : \"password\"}\n                        placeholder=\"Password\"\n                        required\n                        autoComplete=\"true\"\n                        id=\"password\"\n                        onChange={handleChange}\n                      />\n                      <i\n                        className={`ri-eye-line${showPassword ? \"-slash\" : \"\"}`}\n                        onClick={togglePasswordVisibility}\n                      ></i>\n                    </div>\n                  </FormGroup>\n                  <Button\n                    className=\"btn secondary__btn auth__btn\"\n                    type=\"submit\"\n                    onClick={handleClick}\n                  >\n                    Create Account\n                  </Button>\n                </Form>\n                <p>\n                  <Link to=\"/forgotpassword\">Forgot Password?</Link>\n                </p>\n                <p>\n                  Already have an account? <Link to=\"/login\">Login</Link>\n                </p>\n              </div>\n            </div>\n          </Col>\n        </Row>\n      </Container>\n    </section>\n  );\n};\n\nexport default Register;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}