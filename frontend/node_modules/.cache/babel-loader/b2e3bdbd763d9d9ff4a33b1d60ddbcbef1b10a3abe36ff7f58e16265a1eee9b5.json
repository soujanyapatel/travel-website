{"ast":null,"code":"import React,{useState,useContext}from\"react\";import{Container,Row,Col,Form,FormGroup,Button}from\"reactstrap\";import{Link,useNavigate}from\"react-router-dom\";import\"../styles/Login.css\";import loginImg from\"../assets/images/login.png\";import userIcon from\"../assets/images/user.png\";import{AuthContext}from\"../context/AuthContext\";import{BASE_URL}from\"../utils/config\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Login=()=>{const[credentials,setCredentials]=useState({email:\"\",password:\"\"});const[error,setError]=useState(null);const[success,setSuccess]=useState(null);const[showPassword,setShowPassword]=useState(false);// State to toggle password visibility\nconst{dispatch}=useContext(AuthContext);const navigate=useNavigate();const handleChange=e=>{const{id,value}=e.target;setCredentials(prevCredentials=>({...prevCredentials,[id]:value}));};const handleClick=async e=>{e.preventDefault();dispatch({type:\"LOGIN_START\"});setError(null);// Reset the error on each login attempt\ntry{const res=await fetch(\"\".concat(BASE_URL,\"/auth/login\"),{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},credentials:\"include\",body:JSON.stringify(credentials)});const result=await res.json();if(!res.ok){setError(result.message);dispatch({type:\"LOGIN_FAILURE\",payload:result.message});}else{dispatch({type:\"LOGIN_SUCCESS\",payload:result});setSuccess(\"Login successful!\");// Set the success message\nsetTimeout(()=>{navigate(\"/\");},1000);}}catch(error){setError(\"An error occurred while logging in. Please try again later.\");dispatch({type:\"LOGIN_FAILURE\",payload:error.message});}};const togglePasswordVisibility=()=>{setShowPassword(!showPassword);};return/*#__PURE__*/_jsx(\"section\",{children:/*#__PURE__*/_jsx(Container,{children:/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsx(Col,{lg:\"8\",className:\"m-auto\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"login__container d-flex justify-content-between\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"login__img\",children:/*#__PURE__*/_jsx(\"img\",{src:loginImg,alt:\"\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"login__form\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"user\",children:/*#__PURE__*/_jsx(\"img\",{src:userIcon,alt:\"\"})}),/*#__PURE__*/_jsx(\"h2\",{children:\"Login\"}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-danger\",children:error}),success&&/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-success\",children:success}),/*#__PURE__*/_jsxs(Form,{onSubmit:handleClick,children:[/*#__PURE__*/_jsx(FormGroup,{children:/*#__PURE__*/_jsx(\"input\",{type:\"email\",placeholder:\"Email\",required:true,autoComplete:\"true\",id:\"email\",onChange:handleChange})}),/*#__PURE__*/_jsx(FormGroup,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"password__input\",children:[/*#__PURE__*/_jsx(\"input\",{type:showPassword?\"text\":\"password\",placeholder:\"Password\",required:true,autoComplete:\"true\",id:\"password\",onChange:handleChange}),/*#__PURE__*/_jsx(\"i\",{className:\"ri-eye-line\".concat(showPassword?\"-slash\":\"\"),onClick:togglePasswordVisibility})]})}),/*#__PURE__*/_jsx(Button,{className:\"btn secondary__btn auth__btn\",type:\"submit\",onClick:handleClick,children:\"Login\"})]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Don't have an account? \",/*#__PURE__*/_jsx(Link,{to:\"/register\",children:\"Register\"})]})]})]})})})})});};export default Login;","map":{"version":3,"names":["React","useState","useContext","Container","Row","Col","Form","FormGroup","Button","Link","useNavigate","loginImg","userIcon","AuthContext","BASE_URL","jsx","_jsx","jsxs","_jsxs","Login","credentials","setCredentials","email","password","error","setError","success","setSuccess","showPassword","setShowPassword","dispatch","navigate","handleChange","e","id","value","target","prevCredentials","handleClick","preventDefault","type","res","fetch","concat","method","headers","body","JSON","stringify","result","json","ok","message","payload","setTimeout","togglePasswordVisibility","children","lg","className","src","alt","onSubmit","placeholder","required","autoComplete","onChange","onClick","to"],"sources":["/home/soujanya/Music/frontend/src/Pages/Login.jsx"],"sourcesContent":["import React, { useState, useContext } from \"react\";\nimport { Container, Row, Col, Form, FormGroup, Button } from \"reactstrap\";\nimport { Link, useNavigate } from \"react-router-dom\";\nimport \"../styles/Login.css\";\nimport loginImg from \"../assets/images/login.png\";\nimport userIcon from \"../assets/images/user.png\";\nimport { AuthContext } from \"../context/AuthContext\";\nimport { BASE_URL } from \"../utils/config\";\n\nconst Login = () => {\n  const [credentials, setCredentials] = useState({\n    email: \"\",\n    password: \"\",\n  });\n\n  const [error, setError] = useState(null);\n  const [success, setSuccess] = useState(null);\n  const [showPassword, setShowPassword] = useState(false); // State to toggle password visibility\n\n  const { dispatch } = useContext(AuthContext);\n  const navigate = useNavigate();\n\n  const handleChange = (e) => {\n    const { id, value } = e.target;\n    setCredentials((prevCredentials) => ({\n      ...prevCredentials,\n      [id]: value,\n    }));\n  };\n\n  const handleClick = async (e) => {\n    e.preventDefault();\n\n    dispatch({ type: \"LOGIN_START\" });\n    setError(null); // Reset the error on each login attempt\n    try {\n      const res = await fetch(`${BASE_URL}/auth/login`, {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        credentials: \"include\",\n        body: JSON.stringify(credentials),\n      });\n\n      const result = await res.json();\n\n      if (!res.ok) {\n        setError(result.message);\n        dispatch({ type: \"LOGIN_FAILURE\", payload: result.message });\n      } else {\n        dispatch({ type: \"LOGIN_SUCCESS\", payload: result });\n        setSuccess(\"Login successful!\"); // Set the success message\n        setTimeout(() => {\n          navigate(\"/\");\n        }, 1000);\n      }\n    } catch (error) {\n      setError(\"An error occurred while logging in. Please try again later.\");\n      dispatch({ type: \"LOGIN_FAILURE\", payload: error.message });\n    }\n  };\n\n  const togglePasswordVisibility = () => {\n    setShowPassword(!showPassword);\n  };\n\n  return (\n    <section>\n      <Container>\n        <Row>\n          <Col lg=\"8\" className=\"m-auto\">\n            <div className=\"login__container d-flex justify-content-between\">\n              <div className=\"login__img\">\n                <img src={loginImg} alt=\"\" />\n              </div>\n\n              <div className=\"login__form\">\n                <div className=\"user\">\n                  <img src={userIcon} alt=\"\" />\n                </div>\n                <h2>Login</h2>\n                {error && <div className=\"alert alert-danger\">{error}</div>}\n                {success && <div className=\"alert alert-success\">{success}</div>}\n                <Form onSubmit={handleClick}>\n                  <FormGroup>\n                    <input\n                      type=\"email\"\n                      placeholder=\"Email\"\n                      required\n                      autoComplete=\"true\"\n                      id=\"email\"\n                      onChange={handleChange}\n                    />\n                  </FormGroup>\n                  <FormGroup>\n                    <div className=\"password__input\">\n                      <input\n                        type={showPassword ? \"text\" : \"password\"}\n                        placeholder=\"Password\"\n                        required\n                        autoComplete=\"true\"\n                        id=\"password\"\n                        onChange={handleChange}\n                      />\n                      <i\n                        className={`ri-eye-line${showPassword ? \"-slash\" : \"\"}`}\n                        onClick={togglePasswordVisibility}\n                      ></i>\n                    </div>\n                  </FormGroup>\n                  <Button\n                    className=\"btn secondary__btn auth__btn\"\n                    type=\"submit\"\n                    onClick={handleClick}\n                  >\n                    Login\n                  </Button>\n                </Form>\n                <p>\n                  Don't have an account? <Link to=\"/register\">Register</Link>\n                </p>\n              </div>\n            </div>\n          </Col>\n        </Row>\n      </Container>\n    </section>\n  );\n};\n\nexport default Login;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}